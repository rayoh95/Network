### 네트워크

<hr>



#### 7계층 프로토콜 HTTP

HyperText Transfer Protocol

www 에서 쓰이는 핵심 프로토콜로 문서의 전송을 위해 쓰이며, 오늘날 거의 모든 웹 애플리케이션에서 사용되고 있다.

-> 음성, 화상 등 여러 종류의 데이터를 MIME 로 정의하여 전송 가능

##### HTTP 특징 : Request / Response (요청 / 응답 ) 동작에 기반하여 서비스 제공



##### `HTTP 1.0`

* '연결 수립, 동작, 연결 해제' 의 단순함이 특징 : 하나의 URL 은 하나의 TCP 연결

* HTML 문서를 전송 받은 뒤 연결을 끊고 다시 연결하여 데이터를 전송

* 옛날 웹페이지 방식

* 이러한 단순 동작이 반복되어 통신 부하 문제가 발생한다.

  1. 클라이언트와 웹 서버의 3Way Handshake
  2. HTTP 요청
  3. HTTP 응답
  4. 연결 종료
  5. 3Way Handshake
  6. HTTP 요청
  7. ......

  한 웹페이지에 이미지가 10개라면 위 동작이 10번 이루어진다는 의미





#### `HTTP 요청 프로토콜의 구조`

이전 계층처럼 16진수를 사용하는 것이 아니고 영어.특수문자를 사용 (한 줄 두 줄 개념) - 개발자 도구에서 확인할 수 있나..?

1. Request Line
2. Headers : 옵션같은 정보. 추가가 될 수도 안 될 수도 있다.
3. 공백
4. Body



##### Request Line

요청타입	공백	URI	공백	HTTP 버전



#### 요청 타입. 방식 (메소드)

`GET` : 클라이언트가 서버로부터 문서를 읽어오려 할 때 사용

* 데이터를 전송할 때 uri 부분에 데이터를 포함시켜 보낸다.
* 서버에게 uri 을 통해 데이터를 보낸다.

`POST` : 클라이언트가 서버에게 어떤 정보를 전송할 때 사용

* 주소창에 데이터를 포함시키지 않고 Body 에 포함시켜 보낸다.
* 데이터를 노출시키지 않을 수 있다.



그 외 요청은들 클라이언트의 권한이 아니다. 서버 개발자들의 역할



#### URI(Uniform Resource Identifier)

인터넷 상에서 특정 자원(파일)을 나타내는 유일한 주소 (예전에는 url / uri  혼용해서 사용했지만 uri 가 정확하다.)

##### `구조` : scheme ://host[:port] [/path] [?query]

​		ex) ftp :// IP주소 :포트 / 파일이름

​			  http :// IP주소 :포트 / 폴더이름/파일이름

​			IP주소 = 도메인 주소 (컴퓨터 내부적으로 DNS(Domain Name Server) 에 의해 도메인 주소가 IP 주소로 바뀐다)

​			포트 번호 = 지정해주지 않고 웹 브라우저에서 쓰면 알아서 80번 포트 혹은 443번 포트를 써준다. (생략해주는 것)

​			=> www.naver.com:443

​			폴더이름/파일이름 = 서버에서의 데이터 경로

​			?query = 전달하는 데이터



#### HTTP 응답 프로토콜의 구조

1. Status Line
2. Headers
3. 공백
4. Body



HTTP 버전	공백	상태 코드	공백	상태 문구

상태 코드와 상태 문구는 한 쌍의 짝이다.



`상태 코드의 종류`

100 ~ 199	

200 ~ 299	: Client 의 요청이 성공적으로 완료되었을 때

* 200 : OK

300 ~ 399

400 ~ 499	: Client 의 요청이 불환전하여 다른 정보가 필요. (uri 를 잘못 썼거나, 권한이 없는 파일을 요청했거나)

* 403 : Forbidden (권한 없슴)
* 404 : Not Found (서버에 없는 페이지를 요청)

500 ~ 599	: Server 의 오류를 만나거나 Client 요청 수행 불가 (코드의 문법상 오류 등)

* 500 : Internal Server Error
* 503 : Service Unavailable (최대 Session 수 초과)





#### `헤더`

수 많은 정보를 담고 있는 `HTTP 헤더`



##### 일반적인 정보를 담고 있는 `일반 헤더`

* Content-Length : 메세지 바디 길이를 나타낼 때 쓰인다.
* Content-Type : 메세지 바디에 들어있는 컨텐츠 종류 ( Ex. HTML 문서는 text/html )



##### 클라이언트 정보를 담고 있는 `요청 헤더`

* Cookie : 서버로부터 받은 쿠키를 다시 서버에게 보내주는 역할
* Host : HTTP 1.1 에서는 요청 프로토콜을 보낼 때 필수로 보내야한다. 요청된 URL 에 나타난 호스트명을 상세하게 표시
* User-Agent : Client Program 에 대한 식별 기능 정보를 제공 - Client 가 Pc 로 접속했는지 Mobile 로 접속했는지 구별 가능, 운영체제 혹은 웹 브라우저의 종류도 구별



##### 서버 정보를 담고 있는 `응답 헤더`

* Server : 사용하고 있는 웹서버의 소프트웨어에 대한 정보를 포함
* Set-Cookie : 쿠키를 생성하고 브라우저에 보낼 때 사용. 해당 쿠키 값을 브라우저가 서버에게 다시 보낼 때 사용한다.



